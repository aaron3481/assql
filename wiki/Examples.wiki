#labels Pending
#Examples of using asSQL (Beta 2.5 and later)

=== On This Page ===
[Examples#MySqlService_Example MySqlService Example]

[Examples#Token_Responder_Example_1 Token Responder Example 1]

[Examples#Token_Responder_Example_2 Token Responder Example 2]

[Examples#Statement_Parameters_Example Statement Parameters Example]

[Examples#Inserting_Binary_Data_Example Inserting Binary Data Example]

[Examples#Selecting_Binary_Data_Example Selecting Binary Data Example]


=== MySqlService Example ===

This example is using MySqlService and DataGrid. The data grid's columns property and dataProvider property are bound to the MySqlService lastResult (ArrayCollection of Rows) and lastResultSet (The actual ResultSet).

{{{
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication 
	xmlns:mx="http://www.adobe.com/2006/mxml" 
	xmlns:assql="com.maclema.mysql.mxml.*" 
	layout="absolute">
	
	<mx:Script>
	<![CDATA[
		import com.maclema.util.ResultsUtil;

		private function handleConnected(e:Event):void {
			service.send("SELECT * FROM employees");
		}
	]]>
	</mx:Script>
	
	<assql:MySqlService id="service"
		hostname="localhost" 
		username="root"
		password=""
		database="assql-test"
		autoConnect="true"
		connect="handleConnected(event)" />
		
	<mx:DataGrid id="grid" left="10" right="10" top="10" bottom="10"
		dataProvider="{service.lastResult}"
		columns="{ResultsUtil.getDataGridColumns(service.lastResultSet)}" />
		
</mx:WindowedApplication>
}}}


=== Token Responder Example 1 ===

This is an example of using an AsyncResponder to handle a query.

{{{
import com.maclema.mysql.Statement;
import com.maclema.mysql.Connection;
import com.maclema.mysql.ResultSet;
import mx.controls.Alert;
import mx.rpc.AsyncResponder;
import com.maclema.mysql.MySqlToken;
import com.maclema.util.ResultsUtil;

//The MySql Connection
private var con:Connection;

private function onCreationComplete():void {
	con = new Connection("localhost", 3306, "root", "", "assql-test");
	con.addEventListener(Event.CONNECT, handleConnected);
	con.connect();
}

private function handleConnected(e:Event):void {
	var st:Statement = con.createStatement();
	
	var token:MySqlToken = st.executeQuery("SELECT * FROM employees");
	
	token.addResponder(new AsyncResponder(
		function(data:Object, token:Object):void {
			var rs:ResultSet = ResultSet(data);
			Alert.show("Found " + rs.size() + " employees!");
		},
		
		function(info:Object, token:Object):void {
			Alert.show("Error: " + info);
		},
		
		token
	));
}
}}}

=== Token Responder Example 2 ===

This is a more in depth example, using a class that extends AsyncResponder. With each statement, an info property is set on the MySqlToken. This way all queries and responses can be handled with the same result and fault handlers.

{{{
public class DatabaseAccess extends AsyncResponder
{
	private var con:Connection;
	
	public function DatabaseAccess()
	{
		//create the connection and connect
		con = new Connection("localhost", 3306, "root", "", "sampledb");
		con.addEventListener(Event.CONNECT, handleConnected);
		con.connect();
	}
	
	public function getAllEmployees():void {
		var st:Statement = con.createStatement();
		
		var token:MySqlToken = st.executeQuery("SELECT * FROM employees");
		token.info = "getAllEmployees";
		token.addResponder(this);
	}

	override public function result(data:Object, token:Object):void {
		var rs:ResultSet;
		var affectedRows:int;
		var insertID:int;
		
		if ( data is ResultSet ) {
			//SELECT statement
			rs = ResultSet(data);
		}
		else {
			//INSERT/UPDATE/DELETE statement
			affectedRows = data.affectedRows;
			insertID = data.insertID;
		}
		
		if ( token.info == "getAllEmployees" ) {
			Alert.show("Found " + rs.size() + " employees!");
		}
		else if ( token.info == "insertEmployee" ) {
			Alert.show("New Employee ID: " + insertID);
		}
	}
	
	override public function fault(info:Object):void {
		Alert.show("Error: " + info);
	}
}
}}}


=== Statement Parameters Example ===

This is an example of using parameters in a Statement.

{{{
TODO: Put code here.
}}}


=== Inserting Binary Data Example ===

This is an example of inserting binary data.

{{{
TODO: Put code here
}}}


=== Selecting Binary Data Example ===

This is an example of selecting binary data.


{{{
TODO: Put code here
}}}